<div class="flex items-center justify-center p-4 font-sans text-left min-h-[400px] animate-in fade-in duration-500">
  <div class="w-full max-w-md p-2">

    <div class="mb-8">
      <h1 class="text-2xl font-bold text-[#002f34]">Nowe hasło</h1>
      <p class="text-gray-500 mt-2 text-sm font-light">
        Wprowadź i potwierdź nowe hasło dla swojego konta w <strong class="font-semibold">Similio</strong>.
      </p>
    </div>

    @if (errorMessage()) {
      <div class="bg-red-50 border-l-4 border-red-500 p-4 mb-6 animate-in slide-in-from-top-1">
        <p class="text-red-700 text-sm font-medium">{{ errorMessage() }}</p>
      </div>
    }

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">

      <div>
        <app-input-field
          label="Nowe hasło"
          placeholder="Wpisz nowe hasło"
          type="password"
          [control]="getControl('password')">
        </app-input-field>

        <div class="flex flex-wrap gap-3 mt-2 text-gray-400 pl-1">
          <span class="text-[10px] flex items-center transition-colors" [class.text-emerald-600]="isLengthValid">
            <span [class]="isLengthValid ? 'bg-emerald-500' : 'bg-gray-300'"
                  class="w-1.5 h-1.5 rounded-full mr-1 transition-colors"></span> 8+ znaków
          </span>
          <span class="text-[10px] flex items-center transition-colors" [class.text-emerald-600]="hasUpperCase">
            <span [class]="hasUpperCase ? 'bg-emerald-500' : 'bg-gray-300'"
                  class="w-1.5 h-1.5 rounded-full mr-1 transition-colors"></span> Wielka litera
          </span>
          <span class="text-[10px] flex items-center transition-colors" [class.text-emerald-600]="hasNumber">
            <span [class]="hasNumber ? 'bg-emerald-500' : 'bg-gray-300'"
                  class="w-1.5 h-1.5 rounded-full mr-1 transition-colors"></span> Cyfra
          </span>
        </div>
      </div>

      <div>
        <app-input-field
          label="Powtórz nowe hasło"
          placeholder="Powtórz hasło"
          type="password"
          [control]="getControl('confirmPassword')">
        </app-input-field>

        @if (form.get('confirmPassword')?.touched && form.hasError('mismatch')) {
          <p class="text-red-500 text-[11px] font-light italic mt-1 pl-1 animate-in slide-in-from-top-1">
            * Hasła muszą być identyczne
          </p>
        }
      </div>

      <app-button
        type="submit"
        [disabled]="form.invalid || isLoading()"
        [fullWidth]="true"
        extraClass="py-4"
        [isLoading]="isLoading()"
      >
        Zapisz nowe hasło
      </app-button>

    </form>
  </div>
</div>
