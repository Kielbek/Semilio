<section class="bg-white p-2">
  <div class="mx-auto max-w-7xl grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">

    @for (product of products(); track product.id) {
      <div class="h-full">
        <ng-container *ngTemplateOutlet="itemTemplate; context: { $implicit: product }">
        </ng-container>
      </div>
    }

    @if (loading()) {
      @for (i of [1,2,3,4,5,6,7,8,9,10]; track i) {
        <div class="animate-pulse space-y-3">
          <div class="aspect-[3/4] bg-gray-200 rounded-sm"></div>

          <div class="space-y-2 p-1">
            <div class="h-3 bg-gray-200 rounded w-full"></div>
            <div class="h-3 bg-gray-100 rounded w-2/3"></div>
            <div class="pt-2">
              <div class="h-5 bg-gray-200 rounded w-1/3"></div>
            </div>
          </div>
        </div>
      }
    }
  </div>

  @if (!loading() && products().length === 0) {
    <div class="flex justify-center items-center w-full min-h-[400px]">
      <ng-content select="[emptyState]"></ng-content>
    </div>
  }

  <div #sentinel class="h-10 w-full flex justify-center items-center mt-4">
  </div>
</section>
