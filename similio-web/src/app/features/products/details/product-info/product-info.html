<div class="bg-white rounded-sm p-5 shadow-soft shadow-sm min-h-[250px] relative">
  @if (product) {
    <div class="absolute top-4 right-4 flex flex-col items-end z-10">
      <button
        type="button"
        (click)="shareProduct()"
        class="group flex items-center justify-center p-2 text-gray-400 hover:text-[#002f34] hover:bg-gray-50 rounded-full transition-all cursor-pointer"
        title="Udostępnij ogłoszenie"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-share2-icon lucide-share-2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>
      </button>

      @if (linkCopied) {
        <div class="absolute top-10 right-0 bg-gray-800 text-white text-[10px] px-2 py-1 rounded shadow-lg animate-in fade-in slide-in-from-top-1">
          Skopiowano link!
        </div>
      }
    </div>

    <time class="text-xs md:text-sm text-gray-500 block mb-1" [attr.datetime]="product.createdAt | date:'yyyy-MM-dd'">
      Dodano: {{ product.createdAt | date:'d MMMM y' }}
    </time>

    <h1 class="text-lg md:text-xl font-bold leading-snug pr-10 text-black">
      {{ product.title }}
    </h1>

    <div class="mt-3 text-2xl font-black text-black">
      {{ product.price.amount | number:'1.2-2' }} {{ product.price.currencyCode}}
    </div>

    <div class="mt-6 flex flex-col gap-3">
      @if (isMine) {
        <app-button
          class="w-full"
          [fullWidth]="true"
          (click)="editProduct()">
          <div class="flex items-center justify-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>
            Edytuj ogłoszenie
          </div>
        </app-button>
      } @else {
        <app-button
          class="w-full"
          [fullWidth]="true"
          (click)="openChat()">
          Napisz wiadomość
        </app-button>

        <app-button
          variant="secondary"
          class="w-full"
          [fullWidth]="true">
          Zaproponuj cenę
        </app-button>
      }
    </div>

  } @else {
    <div class="animate-pulse space-y-4">
      <div class="h-3 bg-gray-100 rounded w-1/4"></div>

      <div class="space-y-2">
        <div class="h-6 bg-gray-200 rounded w-full"></div>
        <div class="h-6 bg-gray-200 rounded w-4/5"></div>
      </div>

      <div class="h-8 bg-gray-200 rounded w-1/3 mt-6"></div>

      <div class="mt-8 space-y-3">
        <div class="h-11 bg-gray-100 rounded-sm w-full"></div>
        <div class="h-11 bg-gray-100 rounded-sm w-full"></div>
      </div>
    </div>
  }
</div>
